{"ast":null,"code":"import React from'react';import{connect}from'react-redux';import{useForm}from'react-hook-form';import{showEditForm,hideEditForm}from'../../redux/actions';import{editFormSelector,allHotDogsSelector}from'../../redux/selectors';import{deleteHotDogStart,updateHotDogStart}from'../../redux/actions';import'./hot-dog-item.css';var HotDogItem=function HotDogItem(_ref){var data=_ref.data,isVisibleEditForm=_ref.isVisibleEditForm,showEditForm=_ref.showEditForm,deleteHotDogStart=_ref.deleteHotDogStart,updateHotDogStart=_ref.updateHotDogStart,hideEditForm=_ref.hideEditForm,hotDogs=_ref.hotDogs;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var names=hotDogs?hotDogs.map(function(el){return el.title;}):[];var id=data.hotdog_id,title=data.title,price=data.price,description=data.description,img=data.img;var updateHotDog=function updateHotDog(data){updateHotDogStart(data);hideEditForm();};return/*#__PURE__*/React.createElement(\"li\",{className:\"hot-dog-item\"},/*#__PURE__*/React.createElement(\"img\",{src:img,alt:\"\"}),isVisibleEditForm!==id&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",{className:\"hot-dog-item__title\"},title),/*#__PURE__*/React.createElement(\"p\",{className:\"hot-dog-item__price\"},price,\" $\"),/*#__PURE__*/React.createElement(\"p\",{className:\"hot-dog-item__description\"},description),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return showEditForm(id);},className:\"hot-dog-item__btn\"},\"Edit\")),isVisibleEditForm===id&&/*#__PURE__*/React.createElement(\"form\",{className:\"edit-form\",onSubmit:handleSubmit(function(data){return updateHotDog({data:data,id:id});})},errors.title&&errors.title.type==='occupied'&&/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},\"You already have this point.\"),/*#__PURE__*/React.createElement(\"input\",{name:\"img\",type:\"text\",defaultValue:img,ref:register({required:true})}),/*#__PURE__*/React.createElement(\"input\",{name:\"title\",type:\"text\",defaultValue:title,ref:register({required:true,validate:{occupied:function occupied(value){var isOccupied;names.forEach(function(el){if(value===el&&value!==title){isOccupied=false;}});return isOccupied;}}})}),/*#__PURE__*/React.createElement(\"input\",{name:\"price\",type:\"number\",defaultValue:price,ref:register({required:true})}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"description\",className:\"edit-form__description\",defaultValue:description,ref:register({required:true})}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"hot-dog-item__btn\",onClick:function onClick(){return deleteHotDogStart(id);}},\"Delete\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"hot-dog-item__btn\"},\"Upgrade\")));};var mapStateToProps=function mapStateToProps(state){return{isVisibleEditForm:editFormSelector(state),hotDogs:allHotDogsSelector(state)};};var mapDispatchToProps={showEditForm:showEditForm,hideEditForm:hideEditForm,deleteHotDogStart:deleteHotDogStart,updateHotDogStart:updateHotDogStart};export default connect(mapStateToProps,mapDispatchToProps)(HotDogItem);","map":{"version":3,"sources":["/Users/igor/Desktop/testTask/client/src/components/hot-dog-item/hot-dog-item.js"],"names":["React","connect","useForm","showEditForm","hideEditForm","editFormSelector","allHotDogsSelector","deleteHotDogStart","updateHotDogStart","HotDogItem","data","isVisibleEditForm","hotDogs","register","handleSubmit","errors","names","map","el","title","id","hotdog_id","price","description","img","updateHotDog","type","required","validate","occupied","value","isOccupied","forEach","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { showEditForm, hideEditForm } from '../../redux/actions'\nimport { editFormSelector, allHotDogsSelector } from '../../redux/selectors';\nimport { deleteHotDogStart, updateHotDogStart } from '../../redux/actions';\n\nimport './hot-dog-item.css';\n\nconst HotDogItem = ({data, isVisibleEditForm, showEditForm, deleteHotDogStart, updateHotDogStart, hideEditForm, hotDogs}) => {\n\n    const { register, handleSubmit, errors } = useForm(); \n    const names = hotDogs? hotDogs.map((el) => el.title): [];\n\n    const { hotdog_id: id, title, price, description, img } = data;\n\n    const updateHotDog = (data) => {\n        updateHotDogStart(data);\n        hideEditForm();\n    }\n\n    return (\n        <li className='hot-dog-item'>\n            <img src={img} alt=\"\"/>\n            {isVisibleEditForm !== id &&\n                <>\n                    <h3 className='hot-dog-item__title'>{title}</h3>\n                    <p className='hot-dog-item__price'>{price} $</p>\n                    <p className='hot-dog-item__description'>{description}</p>\n                    <button onClick={() => showEditForm(id)} className='hot-dog-item__btn'>Edit</button>\n                </>\n            }\n\n            {isVisibleEditForm === id && \n                <form className='edit-form' onSubmit={handleSubmit((data) => updateHotDog({data, id}))}>\n                    {errors.title && errors.title.type === 'occupied' && (\n                        <p className='error'>You already have this point.</p>\n                    )}\n                    <input name='img' type='text' defaultValue={img} ref={register({ required: true})} />\n\n                    <input name='title' type='text' defaultValue={title} ref={register({ required: true, validate: {\n                        occupied: (value) => {\n                            let isOccupied;\n                            names.forEach(el => {\n                                if(value === el && value !==title){\n                                    isOccupied = false\n                                }\n                            });\n                            return isOccupied;\n                        } \n                    } })}/>\n                    <input name='price' type='number' defaultValue={price} ref={register({ required: true })}/>\n                    <textarea \n                        name='description' \n                        className='edit-form__description'\n                        defaultValue={description} \n                        ref={register({ required: true })}>\n                    </textarea>\n                    <button  type='button' className='hot-dog-item__btn' onClick={() => deleteHotDogStart(id)} >Delete</button>\n                    <button type='submit' className='hot-dog-item__btn'>Upgrade</button>\n                </form>\n            }\n        </li>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isVisibleEditForm: editFormSelector(state),\n        hotDogs: allHotDogsSelector(state)\n    }\n}\n\nconst mapDispatchToProps = {\n    showEditForm,\n    hideEditForm,\n    deleteHotDogStart,\n    updateHotDogStart\n};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(HotDogItem);\n"]},"metadata":{},"sourceType":"module"}